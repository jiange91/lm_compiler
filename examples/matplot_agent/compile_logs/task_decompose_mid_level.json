{
    "plot debugger": {
        "agents": {
            "CodeComprehensionAgent": {
                "inputs": [
                    "code"
                ],
                "outputs": [
                    "code_explanation"
                ],
                "prompt": "You are an expert in understanding Python code. You will be given a piece of existing Python code for data visualization. Your task is to analyze the code and provide a detailed explanation of what the code is intended to do. Do not attempt to fix any errors or run the code. Focus solely on understanding and explaining the code's purpose and functionality.",
                "next_action": [
                    "ErrorAnalysisAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "ErrorAnalysisAgent": {
                "inputs": [
                    "code",
                    "error_message"
                ],
                "outputs": [
                    "error_explanation"
                ],
                "prompt": "You are an expert in analyzing error messages in Python code. You will be given a piece of existing Python code for data visualization and an associated error message. Your task is to analyze the error message and identify the specific part of the code that is causing the error. Provide a detailed explanation of the error and its likely cause based on the error message and the code.",
                "next_action": [
                    "CodeFixingAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "CodeFixingAgent": {
                "inputs": [
                    "code",
                    "error_message",
                    "code_explanation",
                    "error_explanation"
                ],
                "outputs": [
                    "code"
                ],
                "prompt": "You are an expert in debugging and fixing Python code. You will be given a piece of existing Python code for data visualization, an associated error message, and an explanation of the code's purpose and the identified error. Your task is to fix the error in the code. Ensure that the corrected code is executable and can generate a plot without any error. You can use any Python library you want to achieve this.",
                "next_action": [
                    "END"
                ],
                "dynamic_action_decision": "None"
            }
        }
    },
    "visual refine coder": {
        "agents": {
            "CodeAnalyzer": {
                "inputs": [
                    "code"
                ],
                "outputs": [
                    "code_summary"
                ],
                "prompt": "You are an expert in understanding and analyzing Python code. You will be given a piece of Python code. Your task is to analyze the code and provide a detailed summary of its functionality. Focus on understanding what the code does and how it works. Do not make any modifications to the code.",
                "next_action": [
                    "InstructionInterpreter"
                ],
                "dynamic_action_decision": "None"
            },
            "InstructionInterpreter": {
                "inputs": [
                    "visual_refinement"
                ],
                "outputs": [
                    "change_list"
                ],
                "prompt": "You are an expert in interpreting natural language instructions for code modifications. You will be given a set of instructions describing how to improve a piece of Python code. Your task is to provide a detailed and clear list of the specific changes that need to be made to the code to satisfy all the requirements in the instructions.",
                "next_action": [
                    "CodeModifier"
                ],
                "dynamic_action_decision": "None"
            },
            "CodeModifier": {
                "inputs": [
                    "code",
                    "change_list",
                    "plot_file_name"
                ],
                "outputs": [
                    "code"
                ],
                "prompt": "You are an expert in modifying Python code based on specific instructions. You will be given a piece of Python code and a list of specific changes that need to be made to the code. Your task is to modify the code to satisfy all the requirements in the instructions while retaining the original code's functionality. Ensure that any plots generated by the code are saved to a PNG file with the given 'plot_file_name'.",
                "next_action": [
                    "END"
                ],
                "dynamic_action_decision": "None"
            }
        }
    },
    "initial code generation": {
        "agents": {
            "QueryInterpreter": {
                "inputs": [
                    "expanded_query"
                ],
                "outputs": [
                    "task_list"
                ],
                "prompt": "You are an expert at understanding natural language queries. Given a natural language query, identify and list all the specific requirements and tasks that need to be performed to generate the desired Python code. Your output should be a clear and concise list of tasks.",
                "next_action": [
                    "LibrarySelector"
                ],
                "dynamic_action_decision": "None"
            },
            "LibrarySelector": {
                "inputs": [
                    "task_list"
                ],
                "outputs": [
                    "library_list"
                ],
                "prompt": "You are an expert in Python libraries. Based on the list of tasks provided, identify the most suitable Python libraries that can be used to accomplish each task. Provide a list of libraries along with a brief explanation of why each library is appropriate for the task.",
                "next_action": [
                    "CodeGenerator"
                ],
                "dynamic_action_decision": "None"
            },
            "CodeGenerator": {
                "inputs": [
                    "task_list",
                    "library_list"
                ],
                "outputs": [
                    "code"
                ],
                "prompt": "You are an expert Python programmer. Given a list of tasks and the corresponding Python libraries to be used, generate runnable Python code that satisfies all the requirements. Ensure that the code is well-structured, includes necessary comments, and handles any specified file operations such as reading from a CSV file or saving a plot to a PNG file.",
                "next_action": [
                    "PlotSaver",
                    "END"
                ],
                "dynamic_action_decision": "def next_agent(task_list): for task in task_list: if 'plot' in task: return ['PlotSaver']; return ['END']"
            },
            "PlotSaver": {
                "inputs": [
                    "code",
                    "plot_file_name"
                ],
                "outputs": [
                    "code"
                ],
                "prompt": "You are an expert in data visualization and file handling. Given a piece of Python code that generates a plot, modify the code to ensure that the plot is saved to a PNG file with the specified 'plot_file_name'. Ensure that the file-saving operation is correctly implemented and that the plot is saved in the desired format.",
                "next_action": [
                    "END"
                ],
                "dynamic_action_decision": "None"
            }
        }
    },
    "query expansion": {
        "agents": {
            "QueryUnderstandingAgent": {
                "inputs": [
                    "query"
                ],
                "outputs": [
                    "requirements_summary"
                ],
                "prompt": "You are an expert at understanding user requirements. Given a user query, your task is to comprehend the requirements and summarize them clearly. Identify the main objectives and any specific constraints or conditions mentioned in the query. Output a clear and concise summary of the user's requirements.",
                "next_action": [
                    "LibraryIdentificationAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "LibraryIdentificationAgent": {
                "inputs": [
                    "requirements_summary"
                ],
                "outputs": [
                    "identified_libraries"
                ],
                "prompt": "You are an expert in Python libraries. Based on the summarized user requirements, identify all the appropriate Python libraries that can be used to fulfill these requirements. List the libraries and provide a brief explanation of why each library is suitable for the task.",
                "next_action": [
                    "FunctionIdentificationAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "FunctionIdentificationAgent": {
                "inputs": [
                    "requirements_summary",
                    "identified_libraries"
                ],
                "outputs": [
                    "identified_functions"
                ],
                "prompt": "You are an expert in Python programming. Given the user requirements and the identified libraries, pinpoint the correct library functions to call. For each function, specify the parameters that need to be set and provide a brief explanation of what each parameter does. Ensure that the functions and parameters align with the user's requirements.",
                "next_action": [
                    "DataPreparationAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "DataPreparationAgent": {
                "inputs": [
                    "requirements_summary",
                    "identified_functions"
                ],
                "outputs": [
                    "data_preparation_steps"
                ],
                "prompt": "You are an expert in data preparation and manipulation. Based on the user requirements and the identified functions, provide detailed instructions on how to prepare and manipulate the data so that it becomes appropriate for the functions to call. Include any necessary data transformations, cleaning steps, and formatting requirements.",
                "next_action": [
                    "StepByStepInstructionAgent"
                ],
                "dynamic_action_decision": "None"
            },
            "StepByStepInstructionAgent": {
                "inputs": [
                    "requirements_summary",
                    "identified_libraries",
                    "identified_functions",
                    "data_preparation_steps"
                ],
                "outputs": [
                    "expanded_query"
                ],
                "prompt": "You are an expert in writing detailed instructions for Python code. Based on the user requirements, identified libraries, functions, and data preparation steps, expand and solidify the query into a step-by-step detailed instruction on how to write Python code to fulfill the user query's requirements. Ensure that the instructions are clear, executable, and correctly generate the desired output.",
                "next_action": [
                    "END"
                ],
                "dynamic_action_decision": "None"
            }
        }
    }
}